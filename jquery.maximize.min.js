jQuery(function(c){c.fn.maximize=function(q){if(!this.length)return this;var a=c.extend({},c.fn.maximize.defaults,q);return this.each(function(){var h=c(this).find("img"),j=c(this),k=j.find("div"),l=c.map("marginTop marginRight marginBottom marginLeft".split(" "),function(d){return parseInt(k.css(d),10)}),i=c.map("borderTopWidth borderRightWidth borderBottomWidth borderLeftWidth".split(" "),function(d){return parseInt(h.css(d),10)}),m={},n={},o;m[a.align]=0;n[a.align]=0;c(this).css(c.extend({position:"fixed",
top:0,width:"100%",height:"100%",overflow:"hidden"},m));h.hide().css(c.extend({position:"absolute",top:0,left:0,visibility:"hidden"},n));var p=function(){var d=c(window).height(),g=c(window).width(),b,e,f=j.data("img_size");k.length&&k.height(d-l[0]-l[2]);d=k.height();g=k.width();b=g/d;j.trigger("maximizerResize",[g,d]);if(a.resize==="crop")if(b>f.ratio){b=g;e=g/f.ratio}else{b=d*f.ratio;e=d}else if(b<f.ratio){b=g-i[1]-i[3];if(a.zoomInLimit>0&&b>f.width*a.zoomInLimit)b=f.width*a.zoomInLimit;if(a.maxWidth>
0&&b>a.maxWidth)b=a.maxWidth;e=b/f.ratio-i[0]-i[2];if(a.maxHeight>0&&e>a.maxHeight){e=a.maxHeight;b=e*f.ratio}}else{e=d-i[0]-i[2];if(a.zoomInLimit>0&&e>f.height*a.zoomInLimit)e=f.height*a.zoomInLimit;if(a.maxHeight>0&&e>a.maxHeight)e=a.maxHeight;b=e*f.ratio-i[1]-i[3];if(a.maxWidth>0&&b>a.maxWidth){b=a.maxWidth;e=b/f.ratio}}h.width(b).height(e);c.inArray(a.center,["both","horizontal"])!==-1&&h.css({left:(g-b)/2});c.inArray(a.center,["both","vertical"])!==-1&&h.css({top:(d-e)/2})};o=setInterval(function(){var d,
g,b;if(h[0].complete){d=h.width();g=h.height();b=d/g;j.data("img_size",{width:d,height:g,ratio:b});p();j.trigger("beforeShow");h.css({visibility:"visible"}).fadeIn(500,"swing");clearInterval(o)}},50);c(window).bind("resize",function(){p()})})};c.fn.maximize.defaults={center:"both",align:"left",resize:"crop",zoomInLimit:0,maxWidth:0,maxHeight:0}});
