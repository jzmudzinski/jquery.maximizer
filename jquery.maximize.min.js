(function(b){b.fn.maximize=function(q){if(!this.length)return this;var i=b.extend({center:"both",align:"left",resize:"crop"},q);return this.each(function(){var c=b(this).find("img"),k=b(this),j=k.find("div"),l=b.map(["marginTop","marginRight","marginBottom","marginLeft"],function(a){return parseInt(j.css(a),10)}),f=b.map(["borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth"],function(a){return parseInt(c.css(a),10)}),g,m={},n={},o;m[i.align]=0;n[i.align]=0;b(this).css(b.extend({position:"fixed",
top:0,width:"100%",height:"100%",overflow:"hidden"},m));c.hide().css(b.extend({position:"absolute",top:0,left:0,visibility:"hidden"},n));var p=function(){var a=b(window).height(),d=b(window).width(),e,h;j.length&&j.height(a-l[0]-l[2]);a=j.height();d=j.width();e=d/a;k.trigger("maximizerResize",[d,a]);if(i.resize=="crop")if(e>g){e=d;h=d/g;c.width(d).height(h)}else{e=a*g;h=a;c.height(a).width(e)}else if(e<g){e=d;h=d/g;c.width(d-f[1]-f[3]).height(h-f[0]-f[2])}else{e=a*g;h=a;c.width(e-f[1]-f[3]).height(a-
f[0]-f[2])}b.inArray(i.center,["both","horizontal"])!=-1&&c.css({left:(d-e)/2});b.inArray(i.center,["both","vertical"])!=-1&&c.css({top:(a-h)/2})};o=setInterval(function(){if(c[0].complete){g=c.width()/c.height();p();k.trigger("beforeShow");c.css({visibility:"visible"}).fadeIn(500,"swing");clearInterval(o)}},50);b(window).bind("resize",function(){p()})})}})(jQuery);
