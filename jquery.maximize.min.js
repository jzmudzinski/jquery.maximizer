(function(c){c.fn.maximize=function(p){if(!this.length)return this;var g=c.extend({center:"both",align:"left",resize:"crop"},p);return this.each(function(){var a=c(this).find("img"),j=c(this),f=j.find("div"),k=[parseInt(f.css("marginTop"),10),parseInt(f.css("marginRight"),10),parseInt(f.css("marginBottom"),10),parseInt(f.css("marginLeft"),10)],h,l={},m={},n;l[g.align]=0;m[g.align]=0;c(this).css(c.extend({position:"fixed",top:0,width:"100%",height:"100%",overflow:"hidden"},l));a.hide().css(c.extend({position:"absolute",
top:0,left:0,visibility:"hidden"},m));var o=function(){var b=c(window).height(),d=c(window).width(),e,i;f.length&&f.height(b-k[0]-k[2]);b=f.height();d=f.width();e=d/b;j.trigger("maximizerResize",[d,b]);if(g.resize=="crop")if(e>h){e=d;i=d/h;a.width(d).height(i)}else{e=b*h;i=b;a.height(b).width(e)}else if(e<h){e=d;i=d/h;a.width(d).height(i)}else{e=b*h;i=b;a.width(e).height(b)}if(g.center=="both"||g.center=="horizontal")a.css({left:(d-e)/2});if(g.center=="both"||g.center=="vertical")a.css({top:(b-i)/
2})};n=setInterval(function(){if(a[0].complete){h=a.width()/a.height();o();j.trigger("beforeShow");a.css({visibility:"visible"}).fadeIn(500,"swing");clearInterval(n)}},50);c(window).bind("resize",function(){o()})})}})(jQuery);
